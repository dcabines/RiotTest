<todo>
  <h3>{title}</h3>
  <ul>
    <li each={items}>
      <label class={completed: done}>
        <input type="checkbox" checked={done} onclick={parent.toggle}>{title}</label>
    </li>
  </ul>
  <form onsubmit={add}>
    <input name="input" onkeyup={update}>
    <button disabled={!input.value}>Add #{items.length + 1}</button>
    <button disabled={!numDone()} onclick={removeAllDone}>X{numDone()}</button>
  </form>

  <script>
    this.mixin({
      title: opts.title,
      items: opts.items,
      
      add: function() {
        this.items.push({ title: this.input.value });
        this.input.value = '';
      },
      
      removeAllDone: function() {
        this.items = this.items.filter(function(i) {
          return !i.done;
        });
      },
      
      numDone: function() {
        return this.items.filter(function(i) {
          return i.done;
        }).length;
      },
      
      toggle: function(e) {
        var item = e.item;
        item.done = !item.done;
        return true;
      }
    });
  </script>
</todo>