<clicker>
  <button onclick={click} disabled={disabled}>{resource}</button>
  <span>{value.toFixed(0)}</span>

  <script>
    var view = this;
    var cost = opts.cost;
    var store = opts.store;
    var resource = opts.resource;
    var action = opts.action(resource);
    
    this.mixin({
      value: 0,
      disabled: !!action.cost,
      resource: resource,
      
      click: function () {
        store.dispatch(action);
      }
    });
    
    store.on('update', function (state) {
      view.update({
        value: state[resource],
        disabled: !cost(action, state)
      });
    });
  </script>
</clicker>